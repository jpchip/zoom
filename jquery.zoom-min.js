/*!
	Zoom v1.7.8.3 - 2013-11-13
	Forked to https://github.com/jpchip/zoom on 2013-10-10
	Enlarge images on click or mouseover.
	(c) 2013 Jack Moore - http://www.jacklmoore.com/zoom
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(e){var t={url:false,callback:false,target:false,duration:120,on:"mouseover",onZoomIn:false,onZoomOut:false};e.zoom=function(t,n,r){var i,s,o,u,a,f=e(t).css("position");e(t).css({position:/(absolute|fixed)/.test(f)?f:"relative",overflow:"hidden"});r.style.width=r.style.height="";e(r).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:r.width,height:r.height,border:"none",maxWidth:"none"}).appendTo(t);return{init:function(){i=e(t).outerWidth();s=e(t).outerHeight();o=(r.width-i)/e(n).outerWidth();u=(r.height-s)/e(n).outerHeight();a=e(n).offset()},move:function(e){var t=e.pageX;var n=e.pageY;if(e.type=="touchmove"){var f=e.originalEvent.touches[0];t=f.pageX;n=f.pageY;e.originalEvent.preventDefault();e.preventDefault()}var l=t-a.left,c=n-a.top;c=Math.max(Math.min(c,s),0);l=Math.max(Math.min(l,i),0);r.style.left=l*-o+"px";r.style.top=c*-u+"px"}}};e.fn.zoom=function(n){return this.each(function(){var r=e.extend({},t,n||{}),i=r.target||this,s=this,o=document.createElement("img"),u=e(o),a="mousemove.zoom",f=false,l=0,c;if("ontouchstart"in window||!!navigator.msMaxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch){a="touchmove"}if(!r.url){c=e(s).find("img");if(c[0]){r.url=c.data("src")||c.attr("src")}if(!r.url){return}}o.onload=function(){function n(n){t.init();t.move(n);u.stop().fadeTo(e.support.opacity?r.duration:0,1,e.isFunction(r.onZoomIn)?r.onZoomIn.call(o):false)}function c(){u.stop().fadeTo(r.duration,0,e.isFunction(r.onZoomOut)?r.onZoomOut.call(o):false);e(s).off("mousemove");e(s).off("touchmove")}var t=e.zoom(i,s,o);if(r.on==="grab"){e(s).on("mousedown.zoom",function(r){if(r.which===1){e(document).one("mouseup.zoom",function(){c();e(document).off(a,t.move)});n(r);e(document).on(a,t.move);r.preventDefault()}})}else if(r.on==="click"){e(s).on("click.zoom",function(r){if(f){return}else{f=true;n(r);e(s).on("touchmove",t.move);e(s).on("mousemove",t.move);e(s).on("mousedown",function(e){l=e.clientY});e(s).on("click.reset",function(n){n.preventDefault();if(Math.abs(l-n.clientY)<10||!e(n.target).hasClass("zoomImg")){c();f=false;e(document).off(a,t.move);e(s).off("mousedown");e(s).off("click.reset")}});return false}})}else if(r.on==="toggle"){e(s).on("click.zoom",function(e){if(f){c()}else{n(e)}f=!f})}else{t.init();e(s).on("mouseenter.zoom",n).on("mouseleave.zoom",c).on(a,t.move)}if(e.isFunction(r.callback)){r.callback.call(o)}};o.src=r.url;e(s).one("zoom.destroy",function(){e(s).off(".zoom");u.remove()})})};e.fn.zoom.defaults=t})(window.jQuery)
